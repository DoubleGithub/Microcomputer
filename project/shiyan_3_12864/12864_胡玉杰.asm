CODE SEGMENT
	ASSUME CS:CODE
	ORG 4100H
TAB5:
	;--  文字:  胡  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000,010,090,090,0FF,090,090,010,000,0FE,022,022,022,0FE,000,000,
DB  000,000,03F,010,010,010,0BF,040,030,00F,002,042,082,07F,000,000,

;--  文字:  玉  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000,002,082,082,082,082,082,0FE,082,082,082,082,082,002,000,000,
DB  040,040,040,040,040,040,040,07F,040,040,044,058,040,040,040,000,

;--  文字:  杰  --
;--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --
DB  000,008,008,088,048,028,018,0FF,018,028,048,088,008,008,000,000,
DB  082,042,031,000,000,010,060,007,010,060,000,000,011,0E2,002,000,
	PA	EQU	0FF28H
	PCTL	EQU	0FF2BH
	RSN	EQU	00H
	RS 	EQU	01H
	RWN	EQU	02H
	RW	EQU	03H
	EN	EQU	04H
	E	EQU	05H
	CS1N	EQU	08H
	CS1	EQU	09H
	CS2N	EQU	0ah
	CS2	EQU	0bh
	ORG 	01000h
    JMP START
YR     DB ?
ZR     DB ?
PAG    DB ?
Y16    DB ?
pag7   db ?
FL     DB ?
START:  MOV DX,PCTL
        MOV AL,80H
        OUT DX,AL
        MOV FL,00H
        MOV CX,0003H
	CALL DELAYXMS
	MOV DX,PCTL
	MOV AL,EN
	OUT DX,AL
	MOV AL,RS
	OUT DX,AL
	MOV AL,CS1
	OUT DX,AL
	MOV AL,CS2N
	OUT DX,AL
	MOV AL,RSN
	OUT DX,AL
	MOV DX,PA
	MOV AL,3FH
	OUT DX,AL
	CALL WRITE
	MOV CX,0001H
	CALL DELAYXMS
	MOV DX,PCTL
	MOV AL,CS2
	OUT DX,AL
	MOV AL,CS1N
	OUT DX,AL
	MOV AL,RSN
	OUT DX,AL
	MOV DX,PA
	MOV AL,3FH
	OUT DX,AL
	CALL WRITE
MAIN:	;MOV CX,000FH
	MOV BX,OFFSET TAB5
	CALL ZXL
	;MOV CX,000aH
	;CALL DELAYXMS
	;MOV BX,OFFSET TAB6
	;CALL ZXL
	;MOV CX,000FH
	;CALL DELAYXMS
	JMP $;MAIN
ZXL:	MOV DX,PCTL
	MOV AL,CS2N
	OUT DX,AL
	MOV AL,CS1
	OUT DX,AL
	CALL XPAGE
	CALL COM
	MOV DX,PCTL
	MOV AL,CS1N
	OUT DX,AL
	MOV AL,CS2
	OUT DX,AL
	CALL XPAGE
	CALL COM
	RET
XPAGE:	MOV ZR,0c0H
        MOV YR,40H
        MOV PAG,0B8H
        mov pag7,08h
	MOV DX,PCTL
	MOV AL,EN
	OUT DX,AL
	MOV AL,RSN  
	OUT DX,AL
	MOV DX,PA
	MOV AL,ZR      
	OUT DX,AL
	CALL WRITE
	MOV DX,PA
	MOV AL,YR  
	OUT DX,AL
	CALL WRITE
	MOV DX,PA
	MOV AL,PAG 
	OUT DX,AL
	CALL WRITE
	RET
COM:    MOV Y16,10H
        MOV CX,0040H
	MOV DX,PCTL
	MOV AL,RS
	OUT DX,AL
J44:    push bx
J4:     MOV AL,CS:[BX]
	MOV DX,PA
	OUT DX,AL
	push cx
	CALL WRITE
        POP CX
        inc bx  
        DEC Y16
        CMP Y16,0000H
        JNZ J42
        MOV Y16,10H
        ADD BX,0010H
J42:    LOOP J4
        NOT FL
        CMP FL,00H
        JZ J45
        pop bx
        add bx,0010h
J46:    INC PAG
        dec pag7
        cmp pag7,00H
        jz j43
        MOV AL,RSN
        MOV DX,PCTL
        OUT DX,AL
       	MOV DX,PA
	MOV AL,YR 
	OUT DX,AL
	CALL WRITE
	MOV DX,PA
	MOV AL,PAG  
	OUT DX,AL
	CALL WRITE
        JMP COM
J43:    RET
J45:    pop bx
        add bx,0070h
        JMP J46
WRITE:  MOV DX,PCTL
	MOV AL,RWN
	OUT DX,AL
	MOV AL,EN
	OUT DX,AL
	MOV AL,E
	OUT DX,AL
	CALL DELAY2MS
	MOV AL,EN
	OUT DX,AL
	RET
DELAY2MS:
	MOV CX,78H
	LOOP $
	RET
DELAYXMS:
	PUSH CX
	MOV CX,0040H
DELY2:
	PUSH CX
	MOV CX,3E8H
	LOOP $
	POP CX
	LOOP DELY2
	POP CX
	LOOP DELAYXMS
	RET


CODE ENDS
END START
